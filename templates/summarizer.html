{% extends "base.html" %}
{% block title %}Rangkum Tulisan | Web Toolkit{% endblock %}
{% block content %}
<div class="w-full max-w-3xl bg-white rounded-2xl shadow-xl p-6 sm:p-10" style="position: relative; z-index:10;">
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-blue-700 mb-2">‚úçÔ∏è Rangkum Tulisan</h1>
        <div class="bg-gray-100 text-blue-500 border border-yellow-300 rounded-lg p-3 mt-4 text-sm">
      üí° <strong>Info</strong>: Tempel teks panjang atau unggah file. Pilih berapa kalimat ringkasan yang diinginkan.
        </div>
    </div>

    <form id="summForm" data-process-url="{{ url_for('summ_bp.process') }}" class="space-y-4"
        enctype="multipart/form-data">
        <div>
            <label class="label">Teks (opsional ‚Äî jika ada file, file yang dipakai)</label>
            <textarea id="textInput" name="text" rows="8" class="w-full border rounded p-3"
                placeholder="Tempel teks di sini..."></textarea>
        </div>

        <div>
            <label class="label">Unggah file (pdf / docx / txt)</label>

            <!-- container -->
            <div class="flex items-center gap-3">
                <!-- tombol pilih file -->
                <label for="fileInput" id="filePickerBtn"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"
                        aria-hidden="true">
                        <path fill-rule="evenodd"
                            d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9.414A2 2 0 0016.414 8L12 3.586A2 2 0 0010.586 3H4zm6 5a1 1 0 10-2 0v3H5a1 1 0 100 2h3v3a1 1 0 102 0v-3h3a1 1 0 100-2h-3V8z"
                            clip-rule="evenodd" />
                    </svg>
                    Pilih File
                </label>

                <!-- teks nama file -->
                <div id="fileNameDisplay" class="text-sm text-gray-600 truncate max-w-md">Belum ada file dipilih</div>

                <!-- tombol hapus file -->
                <button type="button" id="fileClearBtn"
                    class="hidden px-3 py-1 bg-gray-200 rounded-lg text-sm">Hapus</button>
            </div>

            <!-- actual native input (hidden but present in form) -->
            <input type="file" id="fileInput" name="file" accept=".pdf,.docx,.txt" class="sr-only" />
        </div>

        <div>
            <label class="label">Panjang ringkasan: <span id="sentencesLabel">5</span> kalimat</label>
            <input type="range" id="sentences" name="sentences" min="1" max="12" value="5" class="w-full">
        </div>

        <div class="flex gap-3">
            <button type="submit" class="flex-1 py-2 bg-blue-600 text-white rounded-lg">‚úçÔ∏è Rangkum Tulisan</button>
            <button type="button" id="clearBtn" class="py-2 px-4 bg-gray-200 rounded-lg">Reset</button>
        </div>
    </form>

    <div id="resultArea" class="mt-6 hidden">
        <h3 class="font-semibold text-gray-700 mb-2">Ringkasan</h3>
        <div id="summaryText" class="prose max-w-none p-4 bg-gray-50 border rounded"></div>

        <div class="mt-3 flex gap-2">
            <button id="copyBtn" class="py-2 px-4 bg-green-600 text-white rounded-lg">Salin</button>
            <a id="downloadLink" class="py-2 px-4 bg-gray-800 text-white rounded-lg hidden">Unduh .txt</a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/summarizer.js') }}"></script>
{% endblock %}
